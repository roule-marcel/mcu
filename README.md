# mcu
A Soft MCU for low-latency stuff management in a mobile robot.
It is based on the openMSP430 from [opencores](http://opencores.org/project,openmsp430)

The openMSP430 is a synthesizable 16bit microcontroller core written in Verilog. It is compatible with Texas Instruments' MSP430 microcontroller family and can execute the code generated by any MSP430 toolchain in a near cycle accurate way.

## Install gcc-msp430
On ubuntu 15.04 (should also do on other versions):

    sudo apt-get install gcc-msp430

## Current Memory Map
0x10000=====================
    Vectors
0xffe0----------------------
    Program Memory
0xf000----------------------
    Unused
0x0600----------------------
    Data Memory
0x0200----------------------
    16-Bit Peripheral Space
0x0100----------------------
    8-Bit Peripheral Space
0x0010----------------------
    Special Function Regs
0x0000======================

Focus on peripherals:
0x0200======================
    FREE (8)
0x01F8----------------------
    DMA Channels ? (24)
0x01E0----------------------
    FREE (104)
0x0178----------------------
    Timera A (24)
0x0160----------------------
    FREE (32)
0x0140----------------------
    Hardware Multiplier (16)
0x0130----------------------
    Timer A Irq Vector (2)
0x012E----------------------
    FREE (10)
0x0124----------------------
    DMA Control ? (2)
0x0122----------------------
    Watchdog Timer (2)
0x0120----------------------
    FREE (32)
0x0100======================
    FREE (122)
0x0086----------------------
    UART (6)
0x0080----------------------
    FREE (32)
0x0060----------------------
    Basic Clock Module (10)
0x0056----------------------
    FREE (30)
0x0038----------------------
    GPIO.P6 (4)
0x0034----------------------
    GPIO.P5 (4)
0x0030----------------------
    GPIO.P2 (8)
0x0028----------------------
    GPIO.P1 (8)
0x0020----------------------
    GPIO.P4 (4)
0x001C----------------------
    GPIO.P3 (4)
0x0018----------------------
    FREE (8)
0x0010======================
    Special Function Regs
0x0000======================

## How to install Quartus
### Installation:
    wget http://download.altera.com/akdlm/software/acdsinst/15.1/185/ib_tar/Quartus-lite-15.1.0.185-linux.tar
(To compile stuff for the DE1, you need Quartus 13.0sp1. No documentation because it's temporary.)
    tar xvf Quartus-lite-15.1.0.185-linux.tar
    ./setup

### Launch Quartus:
    $QUARTUS_INSTALL_PATH/15.1/nios2eds/nios2_command_shell.sh #To deal with multiple installs
    quartus
